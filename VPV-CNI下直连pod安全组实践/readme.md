# 背景
安全组在容器层面是基础设施级的流量守门员，通过节点边界的粗粒度过滤，为容器环境提供基础网络隔离，本playbook旨在帮助用户在VPV-CNI网络模式下快速为直连pod部署安全组，并掌握安全组核心配置方式
# 
# 外部入站流量 

# ​出站连接

# 前置条件
1.创建tke集群VPC-CNI网络模式<br>
参考链接:https://cloud.tencent.com/document/product/457/103981 <br>
2.确保集群有可用节点且kubectl已配置访问权限<br>
参考链接:https://kubernetes.io/docs/tasks/tools/ <br>

# 快速开始
本次操作以nginx服务为例(服务端口80,主机端口31000,外网访问端口80)<br>
## 安全组配置
出站规则全放通或者按需配置，本此操作以出站规则全放通为例<br>
前往：私有网络-->安全-->安全组-->新建  创建安全组<br>
### pod(辅助)网卡安全组配置
弹性网卡安全组需要放通pod上部署的服务访问端口(以80端口为例)，本次安全组id以sg-c2givfsx为例，规则如下
|出/入站| 来源| 协议端口| 策略|
 |:--:  | :-----: | :--: | :-----: |
 |  入站| all | tcp:80 |        允许 |
 | 出站| all | all|          允许 |
### clb安全组配置
clb安全组创建需要放通ingress所绑定的监听端口(以80端口为例)，本次安全组id以sg-m2bb6vu3为例，规则如下<br>
|出/入站| 来源| 协议端口| 策略|
 |:--:  | :--------------: | :--: | :-----: |
|  入站| all | tcp:80 | 允许 |
  | 出站| all | all|  允许 |
